<%
  data.api.api.each do |key, value|
    name = key.to_human_case
%>

<h1>
  <%= name %>
</h1>

<% if value.brief  %>
<p class="lead">
  <%= value.brief.to_html%>
</p>
<% end #if value brief %>

<% if value.description  %>
<div>
  <%= value.description.to_html %>
</div>
<% end %>

<h2>
  <%= name %> function
</h2>

<%
  value.functions.each do |function|
    function_name = if function.name then function.name.to_human_case else "" end
    function_description =  if function.description then function.description.to_html else "" end
%>

<dl class="dl-horizontal">
  <dt> <%= function_name %> </dt>
  <dd> <%= function_description %>
<%
if function.parameters && function.parameters.count > 0
%>
<table class="table table-hover">
  <caption>Parameters</caption>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <%
      function.parameters.each do |key, param|
        param_name = key.to_human_case
        param_type = if param.type then param.type.to_human_case else "" end
        param_description = if param.description then param.description.to_html else "" end
    %>
    <tr>
       <td> <%= param_name %> </td>
       <td> <%= param_type %> </td>
       <td> <%= param_description %> </td>
    </tr>
  <% end %>
  </tbody>
</table>

<% end # if params%>

<%  return_type = if function.return.type then function.return.type.to_human_case else "" end
    return_description = if function.return.description then function.return.description.to_html else "" end
    if function.return && function.return.count > 0
  %>
<table class="table table-hover">
  <caption>Returns</caption>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
       <td> <%= return_type %> </td>
       <td> <%= return_description %> </td>
    </tr>
  </tbody>
</table>

<% end # end table %>

</dd>
</dl>
<% end # end description %>

<h2>
  <%= name %> types
</h2>

<%
  # puts value.typedefs.inspect
  value.typedefs.each do |typedef|
    type_name =         if typedef.name then typedef.name.to_human_case else "" end
    type_description =  if typedef.description then typedef.description.to_html else "" end
%>

<dl class="dl-horizontal">
  <dt id = "<%=typedef.name.to_kebab_case %>"> <%= type_name %> </dt>
  <dd> <%= type_description %> </dd>
</dl>


<%
  end # End the inner loop
  end # End for each api
%>